



<!DOCTYPE html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Uteis de Alessandro de Lima Folk">
      
      
        <link rel="canonical" href="https://sandrofolk-me.disqus.com/servidores/nginx/php/">
      
      
        <meta name="author" content="Alessandro de Lima Folk">
      
      
        <meta name="lang:clipboard.copy" content="Copiar para área de transferência">
      
        <meta name="lang:clipboard.copied" content="Copiado para área de transferência">
      
        <meta name="lang:search.language" content="pt">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="Nenhum resultado encontrado">
      
        <meta name="lang:search.result.one" content="1 resultado encontrado">
      
        <meta name="lang:search.result.other" content="# resultados encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-\.]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.6.2">
    
    
      
        <title>PHP - SandroFolk</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.9b572555.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="green" data-md-color-accent="orange">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#ubuntu-nginx-php-php-fpm-oracle" tabindex="1" class="md-skip">
        Ir para o conteúdo
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://sandrofolk-me.disqus.com" title="SandroFolk" class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                SandroFolk
              </span>
              <span class="md-header-nav__topic">
                PHP
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Buscar" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Digite para iniciar a busca
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../python/" title="Servidores" class="md-tabs__link md-tabs__link--active">
          Servidores
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../oracle/plsql/uteis/" title="Oracle" class="md-tabs__link">
          Oracle
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../desenvolvimento/angular/" title="Desenvolvimento" class="md-tabs__link">
          Desenvolvimento
        </a>
      
    </li>
  

  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </span>
    SandroFolk
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Servidores
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Servidores
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1" checked>
    
    <label class="md-nav__link" for="nav-2-1">
      Nginx
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        Nginx
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        PHP
      </label>
    
    <a href="./" title="PHP" class="md-nav__link md-nav__link--active">
      PHP
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Índice</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparando-servidor" title="Preparando servidor" class="md-nav__link">
    Preparando servidor
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#criando-usuario" title="Criando usuário" class="md-nav__link">
    Criando usuário
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rede" title="Rede" class="md-nav__link">
    Rede
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git" title="Git" class="md-nav__link">
    Git
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle" title="Oracle" class="md-nav__link">
    Oracle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend" title="Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#php-56" title="PHP 5.6" class="md-nav__link">
    PHP 5.6
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#php-cli" title="PHP-Cli" class="md-nav__link">
    PHP-Cli
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#php-fpm" title="PHP-Fpm" class="md-nav__link">
    PHP-Fpm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx" title="nginx" class="md-nav__link">
    nginx
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#php" title="PHP" class="md-nav__link">
    PHP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codeigniter" title="CODEIGNITER" class="md-nav__link">
    CODEIGNITER
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#links" title="Links" class="md-nav__link">
    Links
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comentários" class="md-nav__link md-nav__link--active">
            Comentários
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Apache
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Apache
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../apache/python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Oracle
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Oracle
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      PL/SQL
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        PL/SQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../oracle/plsql/uteis/" title="uteis" class="md-nav__link">
      uteis
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Desenvolvimento
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Desenvolvimento
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Front-End
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Front-End
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../desenvolvimento/angular/" title="Angular" class="md-nav__link">
      Angular
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Python/Django
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Python/Django
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../desenvolvimento/pythondjango/heroku/" title="Projeto Heroku" class="md-nav__link">
      Projeto Heroku
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../desenvolvimento/pythondjango/rest_framework/" title="Rest Framework" class="md-nav__link">
      Rest Framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../desenvolvimento/pythondjango/queries/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../desenvolvimento/pythondjango/ldap/" title="Ldap Windows" class="md-nav__link">
      Ldap Windows
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      JavaScript/Vue
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        JavaScript/Vue
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1" type="checkbox" id="nav-4-3-1">
    
    <label class="md-nav__link" for="nav-4-3-1">
      Telerik
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-1">
        Telerik
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../desenvolvimento/javascriptvue/telerik/startproject/" title="StartProject" class="md-nav__link">
      StartProject
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../desenvolvimento/javascriptvue/telerik/samples/" title="Samples" class="md-nav__link">
      Samples
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Índice</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparando-servidor" title="Preparando servidor" class="md-nav__link">
    Preparando servidor
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#criando-usuario" title="Criando usuário" class="md-nav__link">
    Criando usuário
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rede" title="Rede" class="md-nav__link">
    Rede
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git" title="Git" class="md-nav__link">
    Git
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle" title="Oracle" class="md-nav__link">
    Oracle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend" title="Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#php-56" title="PHP 5.6" class="md-nav__link">
    PHP 5.6
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#php-cli" title="PHP-Cli" class="md-nav__link">
    PHP-Cli
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#php-fpm" title="PHP-Fpm" class="md-nav__link">
    PHP-Fpm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx" title="nginx" class="md-nav__link">
    nginx
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#php" title="PHP" class="md-nav__link">
    PHP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codeigniter" title="CODEIGNITER" class="md-nav__link">
    CODEIGNITER
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#links" title="Links" class="md-nav__link">
    Links
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comentários" class="md-nav__link md-nav__link--active">
            Comentários
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="ubuntu-nginx-php-php-fpm-oracle">Ubuntu + Nginx + PHP + PHP-fpm + Oracle<a class="headerlink" href="#ubuntu-nginx-php-php-fpm-oracle" title="Permanent link">&para;</a></h1>
<p>Primeiro vale lembrar que esse é mais um guia do que um tutorial!</p>
<div class="admonition note">
<p>Revisado e testado em 2017-12-06</p>
</div>
<h2 id="preparando-servidor">Preparando servidor<a class="headerlink" href="#preparando-servidor" title="Permanent link">&para;</a></h2>
<h3 id="criando-usuario">Criando usuário<a class="headerlink" href="#criando-usuario" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p>Revisado e testado em 2017-12-06</p>
</div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>useradd -m -d /home/deploy -G adm,www-data,sudo -s /bin/bash deploy
passwd deploy
</pre></div>
</td></tr></table>

<p>Para confirmar as pemissões, verifique o arquivo <code>/etc/passwd</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>deploy:x:1001:1001::/home/deploy:/bin/bash
</pre></div>
</td></tr></table>

<p>Verifique se o arquivo /home/deploy/.profile está com as seguintes informações</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># ~/.profile: executed by the command interpreter for login shells.</span>
<span class="c1"># This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login</span>
<span class="c1"># exists.</span>
<span class="c1"># see /usr/share/doc/bash/examples/startup-files for examples.</span>
<span class="c1"># the files are located in the bash-doc package.</span>

<span class="c1"># the default umask is set in /etc/profile; for setting the umask</span>
<span class="c1"># for ssh logins, install and configure the libpam-umask package.</span>
<span class="c1">#umask 022</span>

<span class="hll"><span class="c1"># if running bash</span>
</span><span class="hll"><span class="k">if</span> <span class="o">[</span> -n <span class="s2">&quot;</span><span class="nv">$BASH_VERSION</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class="hll">    <span class="c1"># include .bashrc if it exists</span>
</span><span class="hll">    <span class="k">if</span> <span class="o">[</span> -f <span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.bashrc&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class="hll">        . <span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.bashrc&quot;</span>
</span><span class="hll">    <span class="k">fi</span>
</span><span class="hll"><span class="k">fi</span>
</span>
<span class="c1"># set PATH so it includes user&#39;s private bin directories</span>
<span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/bin:</span><span class="nv">$HOME</span><span class="s2">/.local/bin:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
</pre></div>
</td></tr></table>

<h3 id="rede">Rede<a class="headerlink" href="#rede" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Troque o usuário</p>
<p>As configurações abaixo poderão ser feitas com usuário <strong>deploy</strong> pois o mesmo foi criado como adminitrador!!!</p>
</div>
<p>Adicionando dns e dominio de busca</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo nano /etc/resolvconf/resolv.conf.d/tail

-- Add
nameserver <span class="m">192</span>.168.0.16
search gruposcheffer.com
</pre></div>
</td></tr></table>

<h3 id="git">Git<a class="headerlink" href="#git" title="Permanent link">&para;</a></h3>
<p>Primeiro vamo configurar o git. Para isso vamos criar a chave ssh e configurar o usuário e email global</p>
<p>Vamos Gerar a Chave</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>ssh-keygen -t rsa -C <span class="s2">&quot;email@dominio.com&quot;</span>

Generating public/private rsa key pair.
Enter file in which to save the key <span class="o">(</span>/home/deploy/.ssh/id_rsa<span class="o">)</span>:<span class="o">[</span>Enter<span class="o">]</span>
Created directory <span class="s1">&#39;/home/deploy/.ssh&#39;</span>.
Enter passphrase <span class="o">(</span>empty <span class="k">for</span> no passphrase<span class="o">)</span>:<span class="o">[</span>Senha<span class="o">]</span>
Enter same passphrase again:<span class="o">[</span>Repete a Senha<span class="o">]</span>
Your identification has been saved in /home/deploy/.ssh/id_rsa.
Your public key has been saved in /home/deploy/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:***************************** ti@gruposcheffer.com.br
</pre></div>
</td></tr></table>

<p>Aplique a chave no seu servidor de versões (gitlab, ou github)</p>
<p>Configurando usuário global</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>git config --global user.name <span class="s2">&quot;Seu Nome&quot;</span>
git config --global user.email <span class="s2">&quot;email@dominio.com&quot;</span>
</pre></div>
</td></tr></table>

<h3 id="oracle">Oracle<a class="headerlink" href="#oracle" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Obs</p>
<p>Essa foi a forma mais rapida de instalar e configurar o oracle no ubuntu!!!</p>
</div>
<p><strong>Referência</strong> <a href="https://help.ubuntu.com/community/Oracle%20Instant%20Client">https://help.ubuntu.com/community/Oracle%20Instant%20Client</a></p>
<p>Baixe os rpm's do site <a href="http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html">http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html</a> e de permissão de execução nos mesmos.</p>
<p><em>PS</em>: basic, sqlplus, devel</p>
<p>Para efetuar a instalação, vamos usar o alien</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo apt-get install alien libaio1 libaio1:i386

sudo alien -i oracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm
sudo alien -i oracle-instantclient12.2-devel-12.2.0.1.0-1.x86_64.rpm
sudo alien -i oracle-instantclient12.2-sqlplus-12.2.0.1.0-1.x86_64.rpm

 <span class="nb">echo</span> <span class="s1">&#39;export LD_LIBRARY_PATH=/usr/lib/oracle/12.2/client64/lib/${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}&#39;</span> &gt;&gt; ~/.profile

 sudo vi /etc/ld.so.conf.d/oracle.conf <span class="o">&amp;&amp;</span> sudo chmod o+r /etc/ld.so.conf.d/oracle.conf

<span class="c1"># Add This on /etc/ld.so.conf.d/oracle.conf</span>
 /usr/lib/oracle/12.2/client64/lib/
sudo ldconfig

<span class="nb">echo</span> <span class="s1">&#39;export ORACLE_HOME=/usr/lib/oracle/12.2/client64&#39;</span> &gt;&gt; ~/.profile
<span class="nb">echo</span> <span class="s1">&#39;export TNS_ADMIN=$ORACLE_HOME/network/admin&#39;</span> &gt;&gt; ~/.profile
<span class="nb">echo</span> <span class="s1">&#39;export PATH=$PATH:$ORACLE_HOME/bin&#39;</span> &gt;&gt; ~/.profile

<span class="nb">source</span> ~/.profile

mkdir -p <span class="nv">$TNS_ADMIN</span>
sudo touch <span class="nv">$TNS_ADMIN</span>/tnsnames.ora
sudo chmod o+r <span class="nv">$TNS_ADMIN</span>/tnsnames.ora
</pre></div>
</td></tr></table>

<p>LDConfig</p>
<p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo vi /etc/ld.so.conf.d/oracle.conf
</pre></div>
</td></tr></table>
Adicione o camino <code>/usr/lib/oracle/12.2/client64/lib</code> e salve o arquivo. Após isso, recarregue as configurações com <code>sudo ldconfig</code></p>
<p>Adicione os tns no arquivo tnsnames.ora e feito!</p>
<h3 id="backend">Backend<a class="headerlink" href="#backend" title="Permanent link">&para;</a></h3>
<p>Dependencias</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo add-apt-repository ppa:ondrej/php
sudo apt-get install software-properties-common
sudo apt-get update
</pre></div>
</td></tr></table>

<h4 id="php-56">PHP 5.6<a class="headerlink" href="#php-56" title="Permanent link">&para;</a></h4>
<p>Instalando o PHP</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo apt-get install php5.6 php5.6-dev php5.6-dev php5.6-fpm php5.6-xml
</pre></div>
</td></tr></table>

<p>Vamos deixar o serviço do <code>fpm</code> para inicializar junto com o SO</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo chkconfig php-fpm on
</pre></div>
</td></tr></table>

<p>Agora vamos instalar o oci8</p>
<div class="admonition note">
<p class="admonition-title">Recomentação da pecl</p>
<p>Use the OCI8 extension to access Oracle Database. Use 'pecl install oci8' to install for PHP 7. Use 'pecl install oci8-2.0.12' to install for PHP 5.2 - PHP 5.6. Use  pecl install oci8-1.4.10' to install for PHP 4.3.9 - PHP 5.1. The OCI8 extension can be linked with Oracle client libraries from Oracle Database 12, 11, or 10.2. These libraries are found in your database installation, or in the free Oracle Instant Client from <a href="http://www.oracle.com/technetwork/database/features/instant-client/">http://www.oracle.com/technetwork/database/features/instant-client/</a>.<br />
Oracle's standard cross-version connectivity applies. For example, PHP OCI8 linked with Instant Client 11.2 can connect to Oracle Database 9.2 onward. See Oracle's note "Oracle Client / Server Interoperability Support" (ID 207303.1) for details.</p>
</div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo pecl download oci8-1.4.10
tar zxvf oci8-1.4.10.tgz
<span class="nb">cd</span> oci8-1.4.10
phpize
./configure --with-oci8<span class="o">=</span>instantclient,<span class="nv">$ORACLE_HOME</span>/lib
sudo make install
</pre></div>
</td></tr></table>

<p>Caso tudo correto, vamos habilitar a lib no <code>php-cli</code> e  <code>php-fpm</code></p>
<p>Primeiro, vamos criar a configuração da lib
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">cd</span> /etc/php/5.6/mods-available
sudo vi oci.ini
</pre></div>
</td></tr></table></p>
<p>Dentro do arquivo, informe o conteudo:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>extension=oci8.so
</pre></div>
</td></tr></table></p>
<p>Salve o arquivo e vamos ativar as extensões</p>
<h5 id="php-cli">PHP-Cli<a class="headerlink" href="#php-cli" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">cd</span> /etc/php/5.6/cli/conf.d/
sudo ln -s /etc/php/5.6/mods-available/oci.ini <span class="m">20</span>-oci.ini
</pre></div>
</td></tr></table>

<p>Teste com o comando para verificar se a extensão esta ativa</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>php -i <span class="p">|</span> grep oci8
</pre></div>
</td></tr></table>

<h5 id="php-fpm">PHP-Fpm<a class="headerlink" href="#php-fpm" title="Permanent link">&para;</a></h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">cd</span> /etc/php/5.6/fpm/conf.d/
sudo ln -s /etc/php/5.6/mods-available/oci.ini <span class="m">20</span>-oci.ini
</pre></div>
</td></tr></table>

<h4 id="nginx">nginx<a class="headerlink" href="#nginx" title="Permanent link">&para;</a></h4>
<p>Vamos instalar o servidor nginx:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo apt-get install nginx
</pre></div>
</td></tr></table>

<p>Após instalado, acesse o diretorio <code>cd /etc/nginx/sites-avaliable</code></p>
<p>Vamos criar a configuração <code>touch php.conf</code></p>
<h5 id="php">PHP<a class="headerlink" href="#php" title="Permanent link">&para;</a></h5>
<p>Importante ter o dns configurado para utilização de nomes (exemplo: php.seudominio.com)</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># php.conf</span>

server <span class="o">{</span>
    listen <span class="m">80</span><span class="p">;</span>
    server_name php.seudominio.com<span class="p">;</span>

    root /home/deploy/projects/php<span class="p">;</span>

    index index.php index.html<span class="p">;</span>

    location ~ <span class="se">\.</span>php$ <span class="o">{</span>
        fastcgi_pass unix:/var/run/php/php5.6-fpm.sock<span class="p">;</span>
        fastcgi_param SCRIPT_FILENAME <span class="nv">$document_root$fastcgi_script_name</span><span class="p">;</span>
        include fastcgi_params<span class="p">;</span>                
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<h5 id="codeigniter">CODEIGNITER<a class="headerlink" href="#codeigniter" title="Permanent link">&para;</a></h5>
<p>Importante ter o dns configurado para utilização de nomes (exemplo: php.seudominio.com)</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># php.conf</span>

server <span class="o">{</span>
    listen <span class="m">80</span><span class="p">;</span>
    server_name php.seudominio.com<span class="p">;</span>

    root /home/deploy/projects/php<span class="p">;</span>

    index index.php index.html<span class="p">;</span>

    location / <span class="o">{</span>
        try_files <span class="nv">$uri</span> <span class="nv">$uri</span>/ /index.php<span class="p">;</span>

        <span class="nv">location</span> <span class="o">=</span> /index.php <span class="o">{</span>

            fastcgi_pass unix:/var/run/php/php5.6-fpm.sock<span class="p">;</span>
            fastcgi_param SCRIPT_FILENAME /home/deploy/projects/php<span class="nv">$fastcgi_script_name</span><span class="p">;</span>
            include fastcgi_params<span class="p">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>Feito isso vamos ativar o site e reiniciar o nginx</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo ln -s /etc/nginx/sites-avaliable/php.conf /etc/nginx/sites-enable/
sudo /etc/init.d/nginx restart
</pre></div>
</td></tr></table>

<p>Para testar, abra o navegador e acesse o endereço <code>php.seudominio.com</code></p>
<h2 id="links">Links<a class="headerlink" href="#links" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/como-instalar-linux-nginx-mysql-php-pilha-lemp-no-ubuntu-16-04-pt">https://www.digitalocean.com/community/tutorials/como-instalar-linux-nginx-mysql-php-pilha-lemp-no-ubuntu-16-04-pt</a></li>
<li><a href="https://askubuntu.com/questions/927026/install-php-fpm-5-6-on-ubuntu-xenial-16-04">https://askubuntu.com/questions/927026/install-php-fpm-5-6-on-ubuntu-xenial-16-04</a></li>
<li><a href="https://rosemberg.net.br/pt/instalando-pdo-oracle-e-oci8-do-php7-no-ubuntumint-oracle-11-2/">https://rosemberg.net.br/pt/instalando-pdo-oracle-e-oci8-do-php7-no-ubuntumint-oracle-11-2/</a></li>
</ul>
                
                  
                
              
              
                
                  


  <h2 id="__comments">Comentários</h2>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = "https://sandrofolk-me.disqus.com/servidores/nginx/php/";
      this.page.identifier =
        "/servidores/nginx/php/";
    };
    (function() {
      var d = document, s = d.createElement("script");
      s.src = "//mkdocs-material.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>

                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../python/" title="Python" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                Python
              </span>
            </div>
          </a>
        
        
          <a href="../../apache/python/" title="Python" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Próximo
                </span>
                Python
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            © 2018 Alessandro de Lima Folk
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/sandrofolk" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/sandrofolk" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/in/alessandrolimafolk/" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.abd7b172.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../../../assets/javascripts/lunr/lunr.pt.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"0.17.2",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>